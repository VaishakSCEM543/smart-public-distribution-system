<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart PDS - Shop Owner Portal</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Firebase App (required) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <!-- Firebase Auth and Database -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --accent: #7209b7;
            --warning: #ff9500;
            --danger: #ff3757;
            --queue-primary: #2E8B57;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(rgba(255, 255, 255, 0.92), rgba(255, 255, 255, 0.92));
            min-height: 100vh;
            margin: 0;
            padding: 0;
            color: var(--dark);
            font-size: 0.9rem;
        }
        
        .login-container {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: url('https://images.unsplash.com/photo-1556761175-b413da4baf72?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1374&q=80') no-repeat center center;
            background-size: cover;
        }
        
        .login-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            width: 100%;
            max-width: 380px;
            overflow: hidden;
        }
        
        .login-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .login-body {
            padding: 20px;
        }
        
        .form-control {
            padding: 10px 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            border: 2px solid #e2e8f0;
            font-size: 0.9rem;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            padding: 10px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
        }
        
        .dashboard-container {
            display: none;
            padding: 15px;
        }
        
        .navbar {
            background: white;
            border-radius: 12px;
            padding: 12px 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            margin-bottom: 15px;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .card-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 12px 12px 0 0 !important;
            padding: 12px 15px;
            font-weight: 600;
            font-size: 0.95rem;
        }
        
        .stat-card {
            text-align: center;
            padding: 15px 10px;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: var(--dark);
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .chart-container {
            position: relative;
            height: 200px;
            width: 100%;
        }
        
        .dropdown-menu {
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: none;
            padding: 8px;
            font-size: 0.9rem;
            z-index: 1050 !important;
        }
        
        .dropdown-item {
            border-radius: 5px;
            padding: 8px 12px;
            transition: all 0.2s;
            margin: 3px 0;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .dropdown-item:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .logout-btn {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 0.85rem;
        }
        
        .subcategory-page {
            display: none;
        }
        
        .back-btn {
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 0.85rem;
            margin-bottom: 15px;
        }
        
        .detail-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 15px;
        }
        
        .detail-header {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 8px;
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 25px;
            height: 25px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .month-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .month-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 5px;
            text-align: center;
            font-weight: 600;
            font-size: 0.8rem;
            cursor: pointer;
        }
        
        .schedule-day {
            background: white;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .day-header {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary);
            font-size: 0.9rem;
        }
        
        .status-open {
            color: green;
            font-weight: 600;
        }
        
        .status-closed {
            color: red;
            font-weight: 600;
        }
        
        .time-input {
            display: none;
            margin-top: 8px;
            font-size: 0.85rem;
        }
        
        .apply-btn {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 15px;
            font-weight: 600;
            font-size: 0.85rem;
            margin-top: 15px;
        }
        
        .time-select {
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #ddd;
            font-size: 0.8rem;
            width: 70px;
        }
        
        .form-select {
            font-size: 0.85rem;
            padding: 6px 10px;
        }
        
        .table th, .table td {
            padding: 8px 10px;
            font-size: 0.85rem;
        }
        
        .badge {
            font-size: 0.75rem;
            padding: 4px 8px;
        }
        
        .notification-icon {
            font-size: 1.1rem;
            margin-right: 10px;
        }
        
        .notification-badge {
            font-size: 0.65rem;
            width: 18px;
            height: 18px;
        }
        
        .time-row {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 8px;
        }
        
        .time-label {
            font-size: 0.85rem;
            min-width: 40px;
        }
        
        .category-dropdown {
            position: relative;
            z-index: 1000;
        }
        
        .real-time-badge {
            background-color: var(--success);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            margin-left: 5px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
        
        .nav-tabs .nav-link {
            border: none;
            border-bottom: 3px solid transparent;
            color: var(--dark);
            font-weight: 500;
            padding: 10px 15px;
        }
        
        .nav-tabs .nav-link.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            background: transparent;
        }
        
        .stock-bar {
            height: 8px;
            border-radius: 4px;
            background: #e9ecef;
            margin-top: 5px;
            overflow: hidden;
        }
        
        .stock-progress {
            height: 100%;
            border-radius: 4px;
            background: var(--primary);
        }
        
        .stock-low {
            background: var(--danger);
        }
        
        .stock-medium {
            background: var(--warning);
        }
        
        .stock-high {
            background: var(--success);
        }
        
        /* NEW QUEUE MANAGEMENT STYLES */
        .queue-management-card {
            border: 3px solid var(--queue-primary);
            background: linear-gradient(135deg, #f8fff8, #e8f5e8);
        }
        
        .current-token {
            background: linear-gradient(135deg, #ffeb3b, #ffc107);
            color: #000;
            font-weight: bold;
            font-size: 2rem;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            animation: pulse 2s infinite;
        }
        
        .token-item {
            border-left: 4px solid var(--queue-primary);
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .token-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .token-item.next {
            border-left-color: #ff9800;
            background: #fff3e0;
        }
        
        .token-item.completed {
            border-left-color: #4caf50;
            background: #e8f5e9;
            opacity: 0.7;
        }
        
        .priority-badge {
            background: var(--danger);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
        }
        
        .queue-stats {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        @media (max-width: 768px) {
            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Login Section -->
    <div class="login-container" id="loginSection">
        <div class="login-card">
            <div class="login-header">
                <h2 style="font-size: 1.5rem;"><i class="fas fa-store me-2"></i>Smart PDS</h2>
                <p class="mb-0" style="font-size: 0.9rem;">Shop Owner Portal</p>
            </div>
            <div class="login-body">
                <div class="mb-3">
                    <label for="email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="email" placeholder="Enter your email">
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="password" placeholder="Enter your password">
                </div>
                <div class="loading" id="loginLoading">
                    <div class="loading-spinner"></div>
                    <p class="mt-2" style="font-size: 0.9rem;">Logging in...</p>
                </div>
                <button class="btn btn-primary w-100" id="loginBtn">
                    <i class="fas fa-sign-in-alt me-2"></i>Login
                </button>
            </div>
        </div>
    </div>

    <!-- Dashboard Section -->
    <div class="dashboard-container" id="dashboardSection">
        <div class="navbar">
            <h3 class="mb-0" style="font-size: 1.2rem;"><i class="fas fa-store me-2"></i>Smart PDS Dashboard</h3>
            <div class="d-flex align-items-center">
                <div class="notification-icon position-relative">
                    <i class="fas fa-bell"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger notification-badge">3</span>
                </div>
                <button class="logout-btn ms-2" id="logoutBtn">
                    <i class="fas fa-sign-out-alt me-1"></i>Logout
                </button>
            </div>
        </div>

        <ul class="nav nav-tabs mb-3" id="dashboardTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab">Overview</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="queue-tab" data-bs-toggle="tab" data-bs-target="#queue" type="button" role="tab">
                    <i class="fas fa-users me-2"></i>Queue Management
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="stock-tab" data-bs-toggle="tab" data-bs-target="#stock" type="button" role="tab">Stock Management</button>
            </li>
        </ul>

        <div class="tab-content" id="dashboardTabContent">
            <!-- Overview Tab -->
            <div class="tab-pane fade show active" id="overview" role="tabpanel">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">Categories</div>
                            <div class="card-body">
                                <div class="dropdown category-dropdown">
                                    <button class="btn btn-primary dropdown-toggle w-100" type="button" id="categoryDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                        Select Category
                                    </button>
                                    <ul class="dropdown-menu w-100" aria-labelledby="categoryDropdown">
                                        <li><a class="dropdown-item category-option" href="#" data-category="grains">Grains</a></li>
                                        <li><a class="dropdown-item category-option" href="#" data-category="liquid">Liquid</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">Recent Transactions <span class="real-time-badge">LIVE</span></div>
                            <div class="card-body">
                                <div id="recentTransactions">
                                    <p class="text-center">No recent transactions</p>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">Shop Schedule</div>
                            <div class="card-body">
                                <button class="btn btn-primary w-100" id="scheduleBtn">
                                    <i class="fas fa-calendar-alt me-2"></i>Manage Schedule
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">Stock Information</div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush" id="stockList">
                                    <li class="list-group-item d-flex justify-content-between align-items-center py-2">
                                        White Rice
                                        <span class="badge bg-primary rounded-pill">5 kg</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center py-2">
                                        Parboiled Rice
                                        <span class="badge bg-primary rounded-pill">5 kg</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center py-2">
                                        Wheat
                                        <span class="badge bg-primary rounded-pill">5 kg</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center py-2">
                                        Edible Oil
                                        <span class="badge bg-primary rounded-pill">5 L</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center py-2">
                                        Kerosene
                                        <span class="badge bg-primary rounded-pill">5 L</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">Stock Visualization</div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="stockChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Transactions Today</div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="transactionsChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Daily Sales</div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="salesChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NEW QUEUE MANAGEMENT TAB -->
            <div class="tab-pane fade" id="queue" role="tabpanel">
                <div class="row">
                    <!-- Current Token Display -->
                    <div class="col-md-12 mb-4">
                        <div class="card queue-management-card">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0"><i class="fas fa-user-check me-2"></i>Currently Serving</h5>
                            </div>
                            <div class="card-body text-center">
                                <div class="current-token" id="currentServingToken">
                                    No active token
                                </div>
                                <div class="action-buttons justify-content-center">
                                    <button class="btn btn-success" id="nextTokenBtn">
                                        <i class="fas fa-forward me-2"></i>Next Token
                                    </button>
                                    <button class="btn btn-warning" id="skipTokenBtn">
                                        <i class="fas fa-step-forward me-2"></i>Skip Token
                                    </button>
                                    <button class="btn btn-danger" id="completeTokenBtn">
                                        <i class="fas fa-check me-2"></i>Complete Service
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Queue Statistics -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-chart-bar me-2"></i>Queue Statistics</h5>
                            </div>
                            <div class="card-body">
                                <div class="queue-stats">
                                    <div class="row text-center">
                                        <div class="col-4">
                                            <div class="fs-3 fw-bold text-primary" id="totalTokens">0</div>
                                            <small>Total Tokens</small>
                                        </div>
                                        <div class="col-4">
                                            <div class="fs-3 fw-bold text-warning" id="waitingTokens">0</div>
                                            <small>Waiting</small>
                                        </div>
                                        <div class="col-4">
                                            <div class="fs-3 fw-bold text-success" id="servedTokens">0</div>
                                            <small>Served Today</small>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div class="d-flex justify-content-between">
                                            <span>Average Wait Time:</span>
                                            <strong id="avgWaitTime">0 min</strong>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <span>Estimated Completion:</span>
                                            <strong id="estCompletion">-</strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Priority Queue -->
                        <div class="card mt-4">
                            <div class="card-header bg-warning text-dark">
                                <h5 class="mb-0"><i class="fas fa-exclamation-triangle me-2"></i>Priority Queue</h5>
                            </div>
                            <div class="card-body">
                                <div id="priorityQueue">
                                    <p class="text-muted text-center">No priority tokens</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Token Queue List -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-list-ol me-2"></i>Token Queue</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <input type="text" class="form-control" id="searchToken" placeholder="Search token number...">
                                </div>
                                <div id="tokenQueueList" style="max-height: 500px; overflow-y: auto;">
                                    <!-- Token list will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stock Management Tab -->
            <div class="tab-pane fade" id="stock" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Current Stock Levels</div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Item</th>
                                                <th>Initial Qty</th>
                                                <th>Current Qty</th>
                                                <th>Used</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="stockTableBody">
                                            <tr>
                                                <td>White Rice</td>
                                                <td>5 kg</td>
                                                <td id="whiteRiceCurrent">5 kg</td>
                                                <td id="whiteRiceUsed">0 kg</td>
                                                <td><span class="status-open">In Stock</span></td>
                                            </tr>
                                            <tr>
                                                <td>Parboiled Rice</td>
                                                <td>5 kg</td>
                                                <td id="parboiledRiceCurrent">5 kg</td>
                                                <td id="parboiledRiceUsed">0 kg</td>
                                                <td><span class="status-open">In Stock</span></td>
                                            </tr>
                                            <tr>
                                                <td>Wheat</td>
                                                <td>5 kg</td>
                                                <td id="wheatCurrent">5 kg</td>
                                                <td id="wheatUsed">0 kg</td>
                                                <td><span class="status-open">In Stock</span></td>
                                            </tr>
                                            <tr>
                                                <td>Edible Oil</td>
                                                <td>5 L</td>
                                                <td id="edibleOilCurrent">5 L</td>
                                                <td id="edibleOilUsed">0 L</td>
                                                <td><span class="status-open">In Stock</span></td>
                                            </tr>
                                            <tr>
                                                <td>Kerosene</td>
                                                <td>5 L</td>
                                                <td id="keroseneCurrent">5 L</td>
                                                <td id="keroseneUsed">0 L</td>
                                                <td><span class="status-open">In Stock</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Stock Visualization</div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="stockManagementChart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">Stock Status</div>
                            <div class="card-body">
                                <div id="stockStatus">
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>White Rice</span>
                                            <span id="whiteRicePercent">100%</span>
                                        </div>
                                        <div class="stock-bar">
                                            <div class="stock-progress stock-high" id="whiteRiceBar" style="width: 100%"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>Parboiled Rice</span>
                                            <span id="parboiledRicePercent">100%</span>
                                        </div>
                                        <div class="stock-bar">
                                            <div class="stock-progress stock-high" id="parboiledRiceBar" style="width: 100%"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>Wheat</span>
                                            <span id="wheatPercent">100%</span>
                                        </div>
                                        <div class="stock-bar">
                                            <div class="stock-progress stock-high" id="wheatBar" style="width: 100%"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>Edible Oil</span>
                                            <span id="edibleOilPercent">100%</span>
                                        </div>
                                        <div class="stock-bar">
                                            <div class="stock-progress stock-high" id="edibleOilBar" style="width: 100%"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>Kerosene</span>
                                            <span id="kerosenePercent">100%</span>
                                        </div>
                                        <div class="stock-bar">
                                            <div class="stock-progress stock-high" id="keroseneBar" style="width: 100%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Subcategory Pages -->
    <div class="dashboard-container subcategory-page" id="grainsPage">
        <div class="navbar">
            <h3 class="mb-0" style="font-size: 1.2rem;"><i class="fas fa-store me-2"></i>Grains Details</h3>
            <div class="d-flex align-items-center">
                <button class="back-btn me-2" data-category="back">
                    <i class="fas fa-arrow-left me-1"></i>Back
                </button>
                <div class="notification-icon position-relative">
                    <i class="fas fa-bell"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger notification-badge">3</span>
                </div>
                <button class="logout-btn ms-2" id="logoutBtnGrains">
                    <i class="fas fa-sign-out-alt me-1"></i>Logout
                </button>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <div class="detail-card">
                    <div class="detail-header">Grains Stock Details</div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div class="stat-number" id="grainsTotalStock">15 kg</div>
                                <div class="stat-label">Total Stock</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div class="stat-number" id="grainsSoldToday">0 kg</div>
                                <div class="stat-label">Sold Today</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div class="stat-number" id="grainsRemaining">15 kg</div>
                                <div class="stat-label">Remaining Stock</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="detail-card">
                    <div class="detail-header">Grains Available</div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Type</th>
                                    <th>Initial Qty</th>
                                    <th>Current Qty</th>
                                    <th>Used</th>
                                    <th>Price (per kg)</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>White Rice</td>
                                    <td>5 kg</td>
                                    <td id="whiteRiceStock">5 kg</td>
                                    <td id="whiteRiceUsedDetail">0 kg</td>
                                    <td>₹ 45</td>
                                    <td><span class="status-open">In Stock</span></td>
                                </tr>
                                <tr>
                                    <td>Parboiled Rice</td>
                                    <td>5 kg</td>
                                    <td id="parboiledRiceStock">5 kg</td>
                                    <td id="parboiledRiceUsedDetail">0 kg</td>
                                    <td>₹ 50</td>
                                    <td><span class="status-open">In Stock</span></td>
                                </tr>
                                <tr>
                                    <td>Wheat</td>
                                    <td>5 kg</td>
                                    <td id="wheatStock">5 kg</td>
                                    <td id="wheatUsedDetail">0 kg</td>
                                    <td>₹ 30</td>
                                    <td><span class="status-open">In Stock</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="detail-card">
                    <div class="detail-header">Grains Stock Chart</div>
                    <div class="chart-container">
                        <canvas id="grainsDetailChart"></canvas>
                    </div>
                </div>
                
                <div class="detail-card">
                    <div class="detail-header">Stock Alerts</div>
                    <div id="grainsAlerts">
                        <div class="alert alert-info py-2">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>All items in stock</strong>
                            <p class="mb-0 mt-1" style="font-size: 0.85rem;">Current stock levels are good.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="dashboard-container subcategory-page" id="liquidPage">
        <div class="navbar">
            <h3 class="mb-0" style="font-size: 1.2rem;"><i class="fas fa-store me-2"></i>Liquid Details</h3>
            <div class="d-flex align-items-center">
                <button class="back-btn me-2" data-category="back">
                    <i class="fas fa-arrow-left me-1"></i>Back
                </button>
                <div class="notification-icon position-relative">
                    <i class="fas fa-bell"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger notification-badge">3</span>
                </div>
                <button class="logout-btn ms-2" id="logoutBtnLiquid">
                    <i class="fas fa-sign-out-alt me-1"></i>Logout
                </button>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <div class="detail-card">
                    <div class="detail-header">Liquid Stock Details</div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div class="stat-number" id="liquidTotalStock">10 L</div>
                                <div class="stat-label">Total Stock</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div class="stat-number" id="liquidSoldToday">0 L</div>
                                <div class="stat-label">Sold Today</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div class="stat-number" id="liquidRemaining">10 L</div>
                                <div class="stat-label">Remaining Stock</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="detail-card">
                    <div class="detail-header">Liquids Available</div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Type</th>
                                    <th>Initial Qty</th>
                                    <th>Current Qty</th>
                                    <th>Used</th>
                                    <th>Price (per L)</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Edible Oil</td>
                                    <td>5 L</td>
                                    <td id="edibleOilStock">5 L</td>
                                    <td id="edibleOilUsedDetail">0 L</td>
                                    <td>₹ 120</td>
                                    <td><span class="status-open">In Stock</span></td>
                                </tr>
                                <tr>
                                    <td>Kerosene</td>
                                    <td>5 L</td>
                                    <td id="keroseneStock">5 L</td>
                                    <td id="keroseneUsedDetail">0 L</td>
                                    <td>₹ 50</td>
                                    <td><span class="status-open">In Stock</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="detail-card">
                    <div class="detail-header">Liquid Stock Chart</div>
                    <div class="chart-container">
                        <canvas id="liquidDetailChart"></canvas>
                    </div>
                </div>
                
                <div class="detail-card">
                    <div class="detail-header">Stock Alerts</div>
                    <div id="liquidAlerts">
                        <div class="alert alert-info py-2">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>All items in stock</strong>
                            <p class="mb-0 mt-1" style="font-size: 0.85rem;">Current stock levels are good.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Schedule Management Page -->
    <div class="dashboard-container subcategory-page" id="schedulePage">
        <div class="navbar">
            <h3 class="mb-0" style="font-size: 1.2rem;"><i class="fas fa-calendar-alt me-2"></i>Shop Schedule Management</h3>
            <div class="d-flex align-items-center">
                <button class="back-btn me-2" data-category="back">
                    <i class="fas fa-arrow-left me-1"></i>Back
                </button>
                <button class="logout-btn" id="logoutBtnSchedule">
                    <i class="fas fa-sign-out-alt me-1"></i>Logout
                </button>
            </div>
        </div>

        <div class="detail-card">
            <div class="detail-header">Select Month or Set General Schedule</div>
            <div class="month-grid">
                <button class="month-btn" data-month="january">Jan</button>
                <button class="month-btn" data-month="february">Feb</button>
                <button class="month-btn" data-month="march">Mar</button>
                <button class="month-btn" data-month="april">Apr</button>
                <button class="month-btn" data-month="may">May</button>
                <button class="month-btn" data-month="june">Jun</button>
                <button class="month-btn" data-month="july">Jul</button>
                <button class="month-btn" data-month="august">Aug</button>
                <button class="month-btn" data-month="september">Sep</button>
                <button class="month-btn" data-month="october">Oct</button>
                <button class="month-btn" data-month="november">Nov</button>
                <button class="month-btn" data-month="december">Dec</button>
                <button class="month-btn" data-month="general" style="background: linear-gradient(135deg, var(--accent), #5a08a0);">General</button>
            </div>
        </div>

        <div class="detail-card" id="monthSchedule" style="display: none;">
            <div class="detail-header">Schedule for <span id="currentMonth"></span></div>
            <div id="monthDays">
                <!-- Days will be generated here -->
            </div>
            <button class="btn btn-primary btn-sm" id="saveMonthSchedule">Save Schedule</button>
        </div>

        <div class="detail-card" id="generalSchedule" style="display: none;">
            <div class="detail-header">General Weekly Schedule</div>
            <div id="weekDays">
                <!-- Week days will be generated here -->
            </div>
            <button class="btn btn-primary btn-sm me-2" id="saveGeneralSchedule">Save General Schedule</button>
            <button class="apply-btn btn-sm" id="applyToAllBtn">Apply to All Months</button>
        </div>
    </div>

    <!-- Bootstrap & Firebase JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  databaseURL: "YOUR_DATABASE_URL",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_BUCKET",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};


        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Shop Owner Queue Management System
        class ShopQueueManagement {
            constructor() {
                this.currentQueue = [];
                this.servedTokens = [];
                this.currentTokenIndex = 0;
                this.init();
            }

            init() {
                this.loadQueueData();
                this.setupEventListeners();
                this.setupRealtimeListeners();
            }

            async loadQueueData() {
                try {
                    // Load current queue
                    const queueSnapshot = await database.ref('queue/current').once('value');
                    this.currentQueue = queueSnapshot.exists() ? queueSnapshot.val() : [];
                    
                    // Load served tokens for today
                    const today = new Date().toISOString().split('T')[0];
                    const servedSnapshot = await database.ref(`servedTokens/${today}`).once('value');
                    this.servedTokens = servedSnapshot.exists() ? Object.values(servedSnapshot.val()) : [];
                    
                    this.updateQueueDisplay();
                    this.updateStatistics();
                    
                } catch (error) {
                    console.error('Error loading queue data:', error);
                }
            }

            setupRealtimeListeners() {
                // Real-time queue updates
                database.ref('queue/current').on('value', (snapshot) => {
                    this.currentQueue = snapshot.exists() ? snapshot.val() : [];
                    this.updateQueueDisplay();
                    this.updateStatistics();
                });

                // Real-time served tokens updates
                const today = new Date().toISOString().split('T')[0];
                database.ref(`servedTokens/${today}`).on('value', (snapshot) => {
                    this.servedTokens = snapshot.exists() ? Object.values(snapshot.val()) : [];
                    this.updateStatistics();
                });
            }

            setupEventListeners() {
                document.getElementById('nextTokenBtn').addEventListener('click', () => {
                    this.serveNextToken();
                });

                document.getElementById('skipTokenBtn').addEventListener('click', () => {
                    this.skipCurrentToken();
                });

                document.getElementById('completeTokenBtn').addEventListener('click', () => {
                    this.completeCurrentToken();
                });

                document.getElementById('searchToken').addEventListener('input', (e) => {
                    this.filterTokens(e.target.value);
                });
            }

            updateQueueDisplay() {
                this.displayCurrentToken();
                this.displayTokenQueue();
                this.displayPriorityQueue();
            }

            displayCurrentToken() {
                const currentTokenElement = document.getElementById('currentServingToken');
                
                if (this.currentQueue.length > 0 && this.currentTokenIndex < this.currentQueue.length) {
                    const currentToken = this.currentQueue[this.currentTokenIndex];
                    currentTokenElement.innerHTML = `
                        <div class="display-2 fw-bold">${currentToken.token}</div>
                        <div class="fs-5">${this.formatTime(currentToken.time)} • ${this.getPriorityText(currentToken.priority)}</div>
                    `;
                } else {
                    currentTokenElement.textContent = 'No active token';
                }
            }

            displayTokenQueue() {
                const queueList = document.getElementById('tokenQueueList');
                
                if (this.currentQueue.length === 0) {
                    queueList.innerHTML = '<p class="text-muted text-center">No tokens in queue</p>';
                    return;
                }

                let html = '';
                this.currentQueue.forEach((token, index) => {
                    const isCurrent = index === this.currentTokenIndex;
                    const isNext = index === this.currentTokenIndex + 1;
                    const position = index + 1;
                    
                    html += `
                        <div class="token-item ${isCurrent ? 'current-serving' : ''} ${isNext ? 'next' : ''}">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>${token.token}</strong>
                                    <br>
                                    <small>Time: ${this.formatTime(token.time)}</small>
                                    ${token.priority !== 'normal' ? 
                                        `<span class="priority-badge ms-2">${token.priority}</span>` : ''}
                                </div>
                                <div class="text-end">
                                    <span class="badge ${isCurrent ? 'bg-success' : 'bg-secondary'}">${position}</span>
                                    <br>
                                    <small>Wait: ${position * 5} min</small>
                                </div>
                            </div>
                            ${isCurrent ? '<div class="text-center mt-2"><span class="badge bg-success">CURRENTLY SERVING</span></div>' : ''}
                        </div>
                    `;
                });
                
                queueList.innerHTML = html;
            }

            displayPriorityQueue() {
                const priorityQueue = document.getElementById('priorityQueue');
                const priorityTokens = this.currentQueue.filter(token => 
                    token.priority !== 'normal' && 
                    this.currentQueue.indexOf(token) > this.currentTokenIndex
                );

                if (priorityTokens.length === 0) {
                    priorityQueue.innerHTML = '<p class="text-muted text-center">No priority tokens</p>';
                    return;
                }

                let html = '';
                priorityTokens.forEach((token, index) => {
                    html += `
                        <div class="token-item next">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>${token.token}</strong>
                                    <span class="priority-badge ms-2">${token.priority}</span>
                                </div>
                                <div>
                                    <small>Position: ${this.currentQueue.indexOf(token) + 1}</small>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                priorityQueue.innerHTML = html;
            }

            updateStatistics() {
                document.getElementById('totalTokens').textContent = this.currentQueue.length;
                document.getElementById('waitingTokens').textContent = Math.max(0, this.currentQueue.length - this.currentTokenIndex - 1);
                document.getElementById('servedTokens').textContent = this.servedTokens.length;
                
                const avgWaitTime = this.calculateAverageWaitTime();
                document.getElementById('avgWaitTime').textContent = avgWaitTime + ' min';
                
                const estCompletion = this.calculateEstimatedCompletion();
                document.getElementById('estCompletion').textContent = estCompletion;
            }

            calculateAverageWaitTime() {
                if (this.servedTokens.length === 0) return 0;
                const totalWait = this.servedTokens.reduce((sum, token) => sum + (token.servedTime - token.timestamp), 0);
                return Math.round((totalWait / this.servedTokens.length) / (1000 * 60)); // Convert to minutes
            }

            calculateEstimatedCompletion() {
                const waitingCount = Math.max(0, this.currentQueue.length - this.currentTokenIndex - 1);
                if (waitingCount === 0) return 'Now';
                
                const estimatedMinutes = waitingCount * 5; // 5 minutes per token
                const completionTime = new Date(Date.now() + estimatedMinutes * 60000);
                return completionTime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            }

            async serveNextToken() {
                if (this.currentTokenIndex < this.currentQueue.length - 1) {
                    this.currentTokenIndex++;
                    this.updateQueueDisplay();
                    this.updateStatistics();
                    
                    // Notify the next customer (this would integrate with your notification system)
                    this.notifyNextCustomer();
                }
            }

            async skipCurrentToken() {
                if (this.currentQueue.length > 0 && this.currentTokenIndex < this.currentQueue.length) {
                    const skippedToken = this.currentQueue[this.currentTokenIndex];
                    
                    // Move to next token
                    if (this.currentTokenIndex < this.currentQueue.length - 1) {
                        this.currentTokenIndex++;
                    }
                    
                    this.updateQueueDisplay();
                    this.updateStatistics();
                    
                    // Log the skipped token
                    this.logSkippedToken(skippedToken);
                }
            }

            async completeCurrentToken() {
                if (this.currentQueue.length > 0 && this.currentTokenIndex < this.currentQueue.length) {
                    const completedToken = this.currentQueue[this.currentTokenIndex];
                    
                    // Remove from queue
                    this.currentQueue.splice(this.currentTokenIndex, 1);
                    
                    // Update Firebase
                    await database.ref('queue/current').set(this.currentQueue);
                    
                    // Add to served tokens
                    await this.logServedToken(completedToken);
                    
                    this.updateQueueDisplay();
                    this.updateStatistics();
                }
            }

            async logServedToken(token) {
                const today = new Date().toISOString().split('T')[0];
                const servedTokenData = {
                    ...token,
                    servedTime: Date.now(),
                    servedBy: 'shop_owner' // In real system, this would be the actual shop owner ID
                };
                
                await database.ref(`servedTokens/${today}/${token.token}`).set(servedTokenData);
            }

            async logSkippedToken(token) {
                const today = new Date().toISOString().split('T')[0];
                const skippedTokenData = {
                    ...token,
                    skippedTime: Date.now(),
                    reason: 'manual_skip'
                };
                
                await database.ref(`skippedTokens/${today}/${token.token}`).set(skippedTokenData);
            }

            notifyNextCustomer() {
                if (this.currentTokenIndex < this.currentQueue.length) {
                    const nextToken = this.currentQueue[this.currentTokenIndex];
                    // This would integrate with your notification system (SMS/Email/Push)
                    console.log('Notifying customer with token:', nextToken.token);
                }
            }

            filterTokens(searchTerm) {
                const tokens = document.querySelectorAll('.token-item');
                tokens.forEach(token => {
                    const tokenNumber = token.querySelector('strong').textContent;
                    if (tokenNumber.toLowerCase().includes(searchTerm.toLowerCase())) {
                        token.style.display = 'block';
                    } else {
                        token.style.display = 'none';
                    }
                });
            }

            formatTime(timeString) {
                const [hours, minutes] = timeString.split(':');
                const hour = parseInt(hours);
                const ampm = hour >= 12 ? 'PM' : 'AM';
                const displayHour = hour > 12 ? hour - 12 : hour;
                return `${displayHour}:${minutes} ${ampm}`;
            }

            getPriorityText(priority) {
                const priorityMap = {
                    'normal': 'Normal',
                    'senior': 'Senior Citizen',
                    'disabled': 'Differently Abled',
                    'pregnant': 'Pregnant Woman'
                };
                return priorityMap[priority] || priority;
            }
        }

        // Initialize Shop Queue Management when dashboard loads
        let shopQueueSystem = null;

        // DOM Elements
        const loginSection = document.getElementById('loginSection');
        const dashboardSection = document.getElementById('dashboardSection');
        const grainsPage = document.getElementById('grainsPage');
        const liquidPage = document.getElementById('liquidPage');
        const schedulePage = document.getElementById('schedulePage');
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const logoutBtnGrains = document.getElementById('logoutBtnGrains');
        const logoutBtnLiquid = document.getElementById('logoutBtnLiquid');
        const logoutBtnSchedule = document.getElementById('logoutBtnSchedule');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const categoryOptions = document.querySelectorAll('.category-option');
        const backButtons = document.querySelectorAll('.back-btn');
        const scheduleBtn = document.getElementById('scheduleBtn');
        const monthBtns = document.querySelectorAll('.month-btn');
        const monthSchedule = document.getElementById('monthSchedule');
        const generalSchedule = document.getElementById('generalSchedule');
        const currentMonthElement = document.getElementById('currentMonth');
        const monthDaysElement = document.getElementById('monthDays');
        const weekDaysElement = document.getElementById('weekDays');
        const saveMonthScheduleBtn = document.getElementById('saveMonthSchedule');
        const saveGeneralScheduleBtn = document.getElementById('saveGeneralSchedule');
        const applyToAllBtn = document.getElementById('applyToAllBtn');
        const loginLoading = document.getElementById('loginLoading');
        const recentTransactionsElement = document.getElementById('recentTransactions');
        const stockListElement = document.getElementById('stockList');

        // Stock data with initial values (5kg each)
        const initialStock = {
            "White Rice": { quantity: 5, unit: "kg", category: "grains" },
            "Parboiled Rice": { quantity: 5, unit: "kg", category: "grains" },
            "Wheat": { quantity: 5, unit: "kg", category: "grains" },
            "Edible Oil": { quantity: 5, unit: "L", category: "liquid" },
            "Kerosene": { quantity: 5, unit: "L", category: "liquid" }
        };

        let currentStock = JSON.parse(JSON.stringify(initialStock));

        // Store the current general schedule for applying to months
        let currentGeneralSchedule = {};

        // Generate time options for dropdown
        function generateTimeOptions() {
            let options = '';
            for (let hour = 1; hour <= 12; hour++) {
                for (let min = 0; min < 60; min += 30) {
                    const time = `${hour}:${min.toString().padStart(2, '0')}`;
                    options += `<option value="${time}">${time}</option>`;
                }
            }
            return options;
        }

        // Generate week days for general schedule
        function generateWeekDays() {
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            const timeOptions = generateTimeOptions();
            
            weekDaysElement.innerHTML = '';
            
            days.forEach(day => {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'schedule-day';
                dayDiv.innerHTML = `
                    <div class="day-header">${day}</div>
                    <select class="form-select mb-2 day-status">
                        <option value="open">Open</option>
                        <option value="closed">Closed</option>
                    </select>
                    <div class="time-input">
                        <div class="time-row">
                            <span class="time-label">From:</span>
                            <select class="form-select from-time" style="width: 90px;">${timeOptions}</select>
                            <select class="form-select from-ampm" style="width: 70px;">
                                <option value="AM">AM</option>
                                <option value="PM">PM</option>
                            </select>
                        </div>
                        <div class="time-row">
                            <span class="time-label">To:</span>
                            <select class="form-select to-time" style="width: 90px;">${timeOptions}</select>
                            <select class="form-select to-ampm" style="width: 70px;">
                                <option value="AM">AM</option>
                                <option value="PM">PM</option>
                            </select>
                        </div>
                    </div>
                `;
                
                weekDaysElement.appendChild(dayDiv);
                
                // Add event listener to the status dropdown
                const statusSelect = dayDiv.querySelector('.day-status');
                const timeInput = dayDiv.querySelector('.time-input');
                
                statusSelect.addEventListener('change', function() {
                    if (this.value === 'open') {
                        timeInput.style.display = 'block';
                    } else {
                        timeInput.style.display = 'none';
                    }
                    // Update the current general schedule
                    updateGeneralSchedule();
                });
                
                // Add event listeners to time selects to update general schedule
                const timeSelects = dayDiv.querySelectorAll('select');
                timeSelects.forEach(select => {
                    select.addEventListener('change', updateGeneralSchedule);
                });
                
                // Initially hide time input if closed
                if (statusSelect.value === 'closed') {
                    timeInput.style.display = 'none';
                }
                
                // Initialize the current general schedule
                currentGeneralSchedule[day] = {
                    status: statusSelect.value,
                    fromTime: dayDiv.querySelector('.from-time').value,
                    fromAmPm: dayDiv.querySelector('.from-ampm').value,
                    toTime: dayDiv.querySelector('.to-time').value,
                    toAmPm: dayDiv.querySelector('.to-ampm').value
                };
            });
        }

        // Update the current general schedule object
        function updateGeneralSchedule() {
            const dayElements = document.querySelectorAll('#weekDays .schedule-day');
            dayElements.forEach(day => {
                const dayName = day.querySelector('.day-header').textContent;
                const status = day.querySelector('.day-status').value;
                const fromTime = day.querySelector('.from-time').value;
                const fromAmPm = day.querySelector('.from-ampm').value;
                const toTime = day.querySelector('.to-time').value;
                const toAmPm = day.querySelector('.to-ampm').value;
                
                currentGeneralSchedule[dayName] = {
                    status: status,
                    fromTime: fromTime,
                    fromAmPm: fromAmPm,
                    toTime: toTime,
                    toAmPm: toAmPm
                };
            });
        }

        // Login Function
        loginBtn.addEventListener('click', function() {
            const email = emailInput.value;
            const password = passwordInput.value;
            
            if (email && password) {
                // Show loading indicator
                loginLoading.style.display = 'block';
                loginBtn.style.display = 'none';
                
                // For demo purposes, we'll just show the dashboard
                // In a real app, you would authenticate with Firebase Auth
                setTimeout(() => {
                    // Hide loading indicator
                    loginLoading.style.display = 'none';
                    loginBtn.style.display = 'block';
                    
                    // Show dashboard
                    loginSection.style.display = 'none';
                    dashboardSection.style.display = 'block';
                    
                    // Initialize Shop Queue Management System
                    shopQueueSystem = new ShopQueueManagement();
                    
                    // Initialize charts and real-time listeners
                    initCharts();
                    setupRealtimeListeners();
                }, 1500);
            } else {
                alert("Please enter both email and password.");
            }
        });

        // Logout Function
        logoutBtn.addEventListener('click', function() {
            dashboardSection.style.display = 'none';
            loginSection.style.display = 'flex';
            emailInput.value = '';
            passwordInput.value = '';
        });
        
        logoutBtnGrains.addEventListener('click', function() {
            grainsPage.style.display = 'none';
            loginSection.style.display = 'flex';
            emailInput.value = '';
            passwordInput.value = '';
        });
        
        logoutBtnLiquid.addEventListener('click', function() {
            liquidPage.style.display = 'none';
            loginSection.style.display = 'flex';
            emailInput.value = '';
            passwordInput.value = '';
        });
        
        logoutBtnSchedule.addEventListener('click', function() {
            schedulePage.style.display = 'none';
            loginSection.style.display = 'flex';
            emailInput.value = '';
            passwordInput.value = '';
        });

        // Category Selection
        categoryOptions.forEach(option => {
            option.addEventListener('click', function() {
                const category = this.getAttribute('data-category');
                
                if (category === 'grains') {
                    dashboardSection.style.display = 'none';
                    grainsPage.style.display = 'block';
                    initGrainsDetailChart();
                } else if (category === 'liquid') {
                    dashboardSection.style.display = 'none';
                    liquidPage.style.display = 'block';
                    initLiquidDetailChart();
                }
            });
        });

        // Back to Dashboard
        backButtons.forEach(button => {
            button.addEventListener('click', function() {
                grainsPage.style.display = 'none';
                liquidPage.style.display = 'none';
                schedulePage.style.display = 'none';
                dashboardSection.style.display = 'block';
            });
        });

        // Schedule Management
        scheduleBtn.addEventListener('click', function() {
            dashboardSection.style.display = 'none';
            schedulePage.style.display = 'block';
            
            // Generate week days if not already generated
            generateWeekDays();
        });

        // Month Selection
        monthBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const month = this.getAttribute('data-month');
                
                if (month === 'general') {
                    monthSchedule.style.display = 'none';
                    generalSchedule.style.display = 'block';
                } else {
                    generalSchedule.style.display = 'none';
                    monthSchedule.style.display = 'block';
                    currentMonthElement.textContent = month.charAt(0).toUpperCase() + month.slice(1);
                    generateMonthDays(month);
                }
            });
        });

        // Generate days for a month
        function generateMonthDays(month) {
            // Clear previous days
            monthDaysElement.innerHTML = '';
            
            // Get number of days in month (simplified)
            const daysInMonth = 31; // Simplified for demo
            const timeOptions = generateTimeOptions();
            
            for (let i = 1; i <= daysInMonth; i++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'schedule-day';
                
                // Get day of week
                const date = new Date(2023, getMonthIndex(month), i);
                const dayOfWeek = date.toLocaleDateString('en-US', { weekday: 'long' });
                
                // Check if we have a general schedule for this day
                const generalDay = currentGeneralSchedule[dayOfWeek];
                const status = generalDay ? generalDay.status : 'open';
                const fromTime = generalDay ? generalDay.fromTime : '9:00';
                const fromAmPm = generalDay ? generalDay.fromAmPm : 'AM';
                const toTime = generalDay ? generalDay.toTime : '6:00';
                const toAmPm = generalDay ? generalDay.toAmPm : 'PM';
                
                dayDiv.innerHTML = `
                    <div class="day-header">${dayOfWeek}, ${month.charAt(0).toUpperCase() + month.slice(1)} ${i}</div>
                    <select class="form-select mb-2 day-status">
                        <option value="open" ${status === 'open' ? 'selected' : ''}>Open</option>
                        <option value="closed" ${status === 'closed' ? 'selected' : ''}>Closed</option>
                    </select>
                    <div class="time-input" style="${status === 'open' ? 'display: block;' : 'display: none;'}">
                        <div class="time-row">
                            <span class="time-label">From:</span>
                            <select class="form-select from-time" style="width: 90px;">${timeOptions}</select>
                            <select class="form-select from-ampm" style="width: 70px;">
                                <option value="AM" ${fromAmPm === 'AM' ? 'selected' : ''}>AM</option>
                                <option value="PM" ${fromAmPm === 'PM' ? 'selected' : ''}>PM</option>
                            </select>
                        </div>
                        <div class="time-row">
                            <span class="time-label">To:</span>
                            <select class="form-select to-time" style="width: 90px;">${timeOptions}</select>
                            <select class="form-select to-ampm" style="width: 70px;">
                                <option value="AM" ${toAmPm === 'AM' ? 'selected' : ''}>AM</option>
                                <option value="PM" ${toAmPm === 'PM' ? 'selected' : ''}>PM</option>
                            </select>
                        </div>
                    </div>
                `;
                
                // Set the selected time values
                setTimeout(() => {
                    if (generalDay) {
                        dayDiv.querySelector('.from-time').value = fromTime;
                        dayDiv.querySelector('.to-time').value = toTime;
                    }
                }, 0);
                
                monthDaysElement.appendChild(dayDiv);
                
                // Add event listener to the status dropdown
                const statusSelect = dayDiv.querySelector('.day-status');
                const timeInput = dayDiv.querySelector('.time-input');
                
                statusSelect.addEventListener('change', function() {
                    if (this.value === 'open') {
                        timeInput.style.display = 'block';
                    } else {
                        timeInput.style.display = 'none';
                    }
                });
            }
        }

        // Helper function to get month index
        function getMonthIndex(month) {
            const months = [
                'january', 'february', 'march', 'april', 'may', 'june',
                'july', 'august', 'september', 'october', 'november', 'december'
            ];
            return months.indexOf(month);
        }

        // Save month schedule
        saveMonthScheduleBtn.addEventListener('click', function() {
            const month = currentMonthElement.textContent.toLowerCase();
            const scheduleData = [];
            
            const dayElements = monthDaysElement.querySelectorAll('.schedule-day');
            dayElements.forEach((day, index) => {
                const status = day.querySelector('.day-status').value;
                const fromTime = day.querySelector('.from-time').value;
                const fromAmPm = day.querySelector('.from-ampm').value;
                const toTime = day.querySelector('.to-time').value;
                const toAmPm = day.querySelector('.to-ampm').value;
                const dayName = getDayName(month, index + 1);
                
                scheduleData.push({
                    day: index + 1,
                    dayName: dayName,
                    status: status,
                    fromTime: status === 'open' ? `${fromTime} ${fromAmPm}` : null,
                    toTime: status === 'open' ? `${toTime} ${toAmPm}` : null
                });
            });
            
            // Save to Firebase Realtime Database
            database.ref('shopSchedule/' + month).set({
                schedule: scheduleData,
                lastUpdated: Date.now()
            })
            .then(() => {
                alert(`Schedule for ${month} saved successfully!`);
            })
            .catch((error) => {
                console.error("Error saving schedule: ", error);
                alert("Error saving schedule. Please try again.");
            });
        });

        // Helper function to get day name from date
        function getDayName(month, day) {
            const date = new Date(2023, getMonthIndex(month), day);
            return date.toLocaleDateString('en-US', { weekday: 'long' });
        }

        // Save general schedule
        saveGeneralScheduleBtn.addEventListener('click', function() {
            const scheduleData = [];
            
            const dayElements = document.querySelectorAll('#weekDays .schedule-day');
            dayElements.forEach((day) => {
                const dayName = day.querySelector('.day-header').textContent;
                const status = day.querySelector('.day-status').value;
                const fromTime = day.querySelector('.from-time').value;
                const fromAmPm = day.querySelector('.from-ampm').value;
                const toTime = day.querySelector('.to-time').value;
                const toAmPm = day.querySelector('.to-ampm').value;
                
                scheduleData.push({
                    day: dayName,
                    status: status,
                    fromTime: status === 'open' ? `${fromTime} ${fromAmPm}` : null,
                    toTime: status === 'open' ? `${toTime} ${toAmPm}` : null
                });
            });
            
            // Save to Firebase Realtime Database
            database.ref('shopSchedule/general').set({
                schedule: scheduleData,
                lastUpdated: Date.now()
            })
            .then(() => {
                alert("General schedule saved successfully!");
            })
            .catch((error) => {
                console.error("Error saving schedule: ", error);
                alert("Error saving schedule. Please try again.");
            });
        });

        // Apply to all months
        applyToAllBtn.addEventListener('click', function() {
            if (confirm("Are you sure you want to apply this schedule to all months? This will overwrite any existing schedules.")) {
                // Update the current general schedule first
                updateGeneralSchedule();
                
                // Apply to all months
                const months = [
                    'january', 'february', 'march', 'april', 'may', 'june',
                    'july', 'august', 'september', 'october', 'november', 'december'
                ];
                
                let updateCount = 0;
                const totalMonths = months.length;
                
                months.forEach(month => {
                    // Create a new schedule for this month based on the general pattern
                    const monthScheduleData = [];
                    
                    // For each day in the month, apply the general schedule for that day of the week
                    const daysInMonth = 31; // Simplified for demo
                    for (let day = 1; day <= daysInMonth; day++) {
                        const dayName = getDayName(month, day);
                        const generalDayData = currentGeneralSchedule[dayName];
                        
                        if (generalDayData) {
                            monthScheduleData.push({
                                day: day,
                                dayName: dayName,
                                status: generalDayData.status,
                                fromTime: generalDayData.status === 'open' ? `${generalDayData.fromTime} ${generalDayData.fromAmPm}` : null,
                                toTime: generalDayData.status === 'open' ? `${generalDayData.toTime} ${generalDayData.toAmPm}` : null
                            });
                        }
                    }
                    
                    // Save to Firebase Realtime Database
                    database.ref('shopSchedule/' + month).set({
                        schedule: monthScheduleData,
                        lastUpdated: Date.now(),
                        basedOnGeneral: true
                    })
                    .then(() => {
                        updateCount++;
                        if (updateCount === totalMonths) {
                            alert("Schedule applied to all months successfully!");
                        }
                    })
                    .catch((error) => {
                        console.error(`Error saving schedule for ${month}: `, error);
                    });
                });
            }
        });

        // Setup real-time listeners for Firebase data
        function setupRealtimeListeners() {
            // Listen for new transactions
            database.ref('transactions').orderByChild('timestamp').limitToLast(5).on('value', (snapshot) => {
                const transactions = snapshot.val();
                updateRecentTransactions(transactions);
                updateStockLevels(transactions);
            });
        }

        // Update recent transactions display
        function updateRecentTransactions(transactions) {
            if (!transactions) {
                recentTransactionsElement.innerHTML = '<p class="text-center">No recent transactions</p>';
                return;
            }
            
            let html = '';
            Object.keys(transactions).forEach(key => {
                const transaction = transactions[key];
                html += `
                    <div class="border-bottom pb-2 mb-2">
                        <div class="d-flex justify-content-between">
                            <strong>${transaction.item}</strong>
                            <span>${transaction.quantity} ${transaction.category === 'Liquid' ? 'L' : 'kg'}</span>
                        </div>
                        <small class="text-muted">${new Date(transaction.timestamp).toLocaleTimeString()}</small>
                    </div>
                `;
            });
            
            recentTransactionsElement.innerHTML = html;
        }

        // Update stock levels based on transactions
        function updateStockLevels(transactions) {
            if (!transactions) return;
            
            // Reset stock data to initial values
            currentStock = JSON.parse(JSON.stringify(initialStock));
            
            // Process transactions to update stock
            Object.keys(transactions).forEach(key => {
                const transaction = transactions[key];
                const itemName = transaction.item;
                const quantity = parseFloat(transaction.quantity);
                
                if (currentStock[itemName]) {
                    currentStock[itemName].quantity -= quantity;
                    if (currentStock[itemName].quantity < 0) currentStock[itemName].quantity = 0;
                }
            });
            
            // Update the stock display
            updateStockDisplay();
        }

        // Update stock display
        function updateStockDisplay() {
            // Update the stock list
            let html = '';
            for (let item in currentStock) {
                const itemData = currentStock[item];
                html += `
                    <li class="list-group-item d-flex justify-content-between align-items-center py-2">
                        ${item}
                        <span class="badge bg-primary rounded-pill">${itemData.quantity} ${itemData.unit}</span>
                    </li>
                `;
            }
            stockListElement.innerHTML = html;
            
            // Update stock management table
            updateStockManagementTable();
            
            // Update individual item displays if on those pages
            if (grainsPage.style.display === 'block') {
                updateGrainsPage();
            }
            
            if (liquidPage.style.display === 'block') {
                updateLiquidPage();
            }
        }

        // Update stock management table
        function updateStockManagementTable() {
            for (let item in currentStock) {
                const itemData = currentStock[item];
                const initialQty = initialStock[item].quantity;
                const used = initialQty - itemData.quantity;
                const percent = (itemData.quantity / initialQty) * 100;
                
                // Update table values
                document.getElementById(`${item.replace(/\s+/g, '')}Current`).textContent = `${itemData.quantity} ${itemData.unit}`;
                document.getElementById(`${item.replace(/\s+/g, '')}Used`).textContent = `${used} ${itemData.unit}`;
                
                // Update progress bars
                const progressBar = document.getElementById(`${item.replace(/\s+/g, '')}Bar`);
                const percentText = document.getElementById(`${item.replace(/\s+/g, '')}Percent`);
                
                progressBar.style.width = `${percent}%`;
                percentText.textContent = `${Math.round(percent)}%`;
                
                // Update progress bar color based on stock level
                progressBar.classList.remove('stock-high', 'stock-medium', 'stock-low');
                if (percent > 50) {
                    progressBar.classList.add('stock-high');
                } else if (percent > 25) {
                    progressBar.classList.add('stock-medium');
                } else {
                    progressBar.classList.add('stock-low');
                }
            }
        }

        // Update grains page
        function updateGrainsPage() {
            document.getElementById('whiteRiceStock').textContent = `${currentStock['White Rice'].quantity} kg`;
            document.getElementById('parboiledRiceStock').textContent = `${currentStock['Parboiled Rice'].quantity} kg`;
            document.getElementById('wheatStock').textContent = `${currentStock['Wheat'].quantity} kg`;
            
            document.getElementById('whiteRiceUsedDetail').textContent = `${initialStock['White Rice'].quantity - currentStock['White Rice'].quantity} kg`;
            document.getElementById('parboiledRiceUsedDetail').textContent = `${initialStock['Parboiled Rice'].quantity - currentStock['Parboiled Rice'].quantity} kg`;
            document.getElementById('wheatUsedDetail').textContent = `${initialStock['Wheat'].quantity - currentStock['Wheat'].quantity} kg`;
            
            // Update grains totals
            const totalGrains = currentStock['White Rice'].quantity + currentStock['Parboiled Rice'].quantity + currentStock['Wheat'].quantity;
            const initialGrains = initialStock['White Rice'].quantity + initialStock['Parboiled Rice'].quantity + initialStock['Wheat'].quantity;
            document.getElementById('grainsTotalStock').textContent = `${totalGrains} kg`;
            document.getElementById('grainsRemaining').textContent = `${totalGrains} kg`;
            document.getElementById('grainsSoldToday').textContent = `${initialGrains - totalGrains} kg`;
            
            // Update alerts
            updateGrainsAlerts();
        }

        // Update liquid page
        function updateLiquidPage() {
            document.getElementById('edibleOilStock').textContent = `${currentStock['Edible Oil'].quantity} L`;
            document.getElementById('keroseneStock').textContent = `${currentStock['Kerosene'].quantity} L`;
            
            document.getElementById('edibleOilUsedDetail').textContent = `${initialStock['Edible Oil'].quantity - currentStock['Edible Oil'].quantity} L`;
            document.getElementById('keroseneUsedDetail').textContent = `${initialStock['Kerosene'].quantity - currentStock['Kerosene'].quantity} L`;
            
            // Update liquid totals
            const totalLiquid = currentStock['Edible Oil'].quantity + currentStock['Kerosene'].quantity;
            const initialLiquid = initialStock['Edible Oil'].quantity + initialStock['Kerosene'].quantity;
            document.getElementById('liquidTotalStock').textContent = `${totalLiquid} L`;
            document.getElementById('liquidRemaining').textContent = `${totalLiquid} L`;
            document.getElementById('liquidSoldToday').textContent = `${initialLiquid - totalLiquid} L`;
            
            // Update alerts
            updateLiquidAlerts();
        }

        // Update grains alerts
        function updateGrainsAlerts() {
            const alertsElement = document.getElementById('grainsAlerts');
            let html = '';
            
            if (currentStock['White Rice'].quantity < 1) {
                html += `
                    <div class="alert alert-warning py-2">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Low Stock Warning</strong>
                        <p class="mb-0 mt-1" style="font-size: 0.85rem;">White Rice is out of stock. Consider restocking.</p>
                    </div>
                `;
            }
            
            if (currentStock['Parboiled Rice'].quantity < 1) {
                html += `
                    <div class="alert alert-warning py-2">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Low Stock Warning</strong>
                        <p class="mb-0 mt-1" style="font-size: 0.85rem;">Parboiled Rice is out of stock. Consider restocking.</p>
                    </div>
                `;
            }
            
            if (currentStock['Wheat'].quantity < 1) {
                html += `
                    <div class="alert alert-warning py-2">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Low Stock Warning</strong>
                        <p class="mb-0 mt-1" style="font-size: 0.85rem;">Wheat is out of stock. Consider restocking.</p>
                    </div>
                `;
            }
            
            if (html === '') {
                html = `
                    <div class="alert alert-info py-2">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>All items in stock</strong>
                        <p class="mb-0 mt-1" style="font-size: 0.85rem;">Current stock levels are good.</p>
                    </div>
                `;
            }
            
            alertsElement.innerHTML = html;
        }

        // Update liquid alerts
        function updateLiquidAlerts() {
            const alertsElement = document.getElementById('liquidAlerts');
            let html = '';
            
            if (currentStock['Edible Oil'].quantity < 1) {
                html += `
                    <div class="alert alert-warning py-2">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Low Stock Warning</strong>
                        <p class="mb-0 mt-1" style="font-size: 0.85rem;">Edible Oil is out of stock. Consider restocking.</p>
                    </div>
                `;
            }
            
            if (currentStock['Kerosene'].quantity < 1) {
                html += `
                    <div class="alert alert-warning py-2">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Low Stock Warning</strong>
                        <p class="mb-0 mt-1" style="font-size: 0.85rem;">Kerosene is out of stock. Consider restocking.</p>
                    </div>
                `;
            }
            
            if (html === '') {
                html = `
                    <div class="alert alert-info py-2">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>All items in stock</strong>
                        <p class="mb-0 mt-1" style="font-size: 0.85rem;">Current stock levels are good.</p>
                    </div>
                `;
            }
            
            alertsElement.innerHTML = html;
        }

        // Initialize Charts
        function initCharts() {
            // Stock Chart
            const stockCtx = document.getElementById('stockChart').getContext('2d');
            const stockChart = new Chart(stockCtx, {
                type: 'pie',
                data: {
                    labels: ['White Rice', 'Parboiled Rice', 'Wheat', 'Edible Oil', 'Kerosene'],
                    datasets: [{
                        data: [5, 5, 5, 5, 5],
                        backgroundColor: [
                            '#4361ee',
                            '#4cc9f0',
                            '#7209b7',
                            '#3a0ca3',
                            '#f72585'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    }
                }
            });

            // Stock Management Chart
            const stockManagementCtx = document.getElementById('stockManagementChart').getContext('2d');
            const stockManagementChart = new Chart(stockManagementCtx, {
                type: 'bar',
                data: {
                    labels: ['White Rice', 'Parboiled Rice', 'Wheat', 'Edible Oil', 'Kerosene'],
                    datasets: [{
                        label: 'Current Stock',
                        data: [5, 5, 5, 5, 5],
                        backgroundColor: '#4361ee',
                        borderWidth: 0,
                        borderRadius: 5
                    }, {
                        label: 'Initial Stock',
                        data: [5, 5, 5, 5, 5],
                        backgroundColor: '#4cc9f0',
                        borderWidth: 0,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        }
                    }
                }
            });

            // Transactions Chart
            const transactionsCtx = document.getElementById('transactionsChart').getContext('2d');
            const transactionsChart = new Chart(transactionsCtx, {
                type: 'bar',
                data: {
                    labels: ['White Rice', 'Parboiled Rice', 'Wheat', 'Edible Oil', 'Kerosene'],
                    datasets: [{
                        label: 'Transactions Today',
                        data: [0, 0, 0, 0, 0],
                        backgroundColor: '#4361ee',
                        borderWidth: 0,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        }
                    }
                }
            });

            // Sales Chart
            const salesCtx = document.getElementById('salesChart').getContext('2d');
            const salesChart = new Chart(salesCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Sales (kg/L)',
                        data: [12, 19, 8, 15, 22, 18, 25],
                        backgroundColor: 'rgba(67, 97, 238, 0.2)',
                        borderColor: '#4361ee',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Initialize Grains Detail Chart
        function initGrainsDetailChart() {
            const grainsDetailCtx = document.getElementById('grainsDetailChart').getContext('2d');
            const grainsDetailChart = new Chart(grainsDetailCtx, {
                type: 'bar',
                data: {
                    labels: ['White Rice', 'Parboiled Rice', 'Wheat'],
                    datasets: [{
                        label: 'Stock (kg)',
                        data: [5, 5, 5],
                        backgroundColor: '#4361ee',
                        borderWidth: 0,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        }
                    }
                }
            });
        }

        // Initialize Liquid Detail Chart
        function initLiquidDetailChart() {
            const liquidDetailCtx = document.getElementById('liquidDetailChart').getContext('2d');
            const liquidDetailChart = new Chart(liquidDetailCtx, {
                type: 'bar',
                data: {
                    labels: ['Edible Oil', 'Kerosene'],
                    datasets: [{
                        label: 'Stock (L)',
                        data: [5, 5],
                        backgroundColor: '#4cc9f0',
                        borderWidth: 0,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>

